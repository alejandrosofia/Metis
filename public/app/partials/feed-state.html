<i id="feed-state-content"></i>

<a ng-if="feedState" class="error-count" href="/feeds/vipfeed-37-2012-11-06-2/election/state/errors">{{feedState.error_count}} Errors in State ID: {{feedState.id}}</a> <mark>link</mark>

<dl class="attributes">
  <dt class="key">Name:</dt>
  <dd class="value">{{feedState.name}}</dd>
</dl>

<section class="data-group">
  <h2>{{feedEarlyVoteSites.length}} Early Vote Sites</h2>

  <span ng-if="!feedEarlyVoteSites" class="is-loading"></span>
  <table id="earlyVoteTable" ng-table="earlyVoteTableParams" template-pagination="earlyVotePagination" class="associations">
    <tr id="earlyVoteSite{{$index}}" ng-repeat="earlyVoteSite in $data">
      <td id="earlyVoteSite-id{{$index}}" data-title="'ID'" sortable="'id'"><a href="no-page">{{earlyVoteSite.id}}</a></td>
      <td id="earlyVoteSite-name{{$index}}" data-title="'Name'" sortable="'name'"><a href="no-page">{{earlyVoteSite.name}}</a></td>
      <td id="earlyVoteSite-address{{$index}}" data-title="'Address'" sortable="'address'"><a href="no-page">{{earlyVoteSite.address}}</a></td>
    </tr>
  </table>
</section>


<section class="data-group">
  <h2><mark>No</mark> Election Administration</h2><!-- There can be only one. If not present use "No" instead of count -->
</section><!-- /.data-group -->

<section class="data-group">
<h2>{{feedState.localities.length}} Localities <small>(Counties)</small></h2>

<p><mark>Map goes here.</mark></p>

<!--<table ng-if="feedState" class="associations">-->
<!-- TODO Ask Navid about the ng-if statement on the table (breaks ng-table for some reason -->

<div ng-if="!feedState"></br><span class="is-loading"></span></div>
<table id="LocalTable" ng-table="localTableParams" template-pagination="localPagination" class="associations">
  <tr id="locality{{$index}}" ng-repeat="locality in $data">
    <td id="locality-id{{$index}}" class="id" data-title="'ID'" sortable="'id'"><a href="{{$location.absUrl()}}/{{locality.id}}">{{locality.id}}</a></td>
    <td id="locality-name{{$index}}" class="name" data-title="'Name'" sortable="'name'"><a href="{{$location.absUrl()}}/{{locality.id}}">{{locality.name}}</a></td>
    <td id="locality-precincts{{$index}}" class="precincts" data-title="'Precincts'" sortable="'precints'"><a href="{{$location.absUrl()}}/{{locality.id}}">{{locality.precints}}</a></td>
  </tr>
</table>

<script type="text/ng-template" id="localPagination">
  <ul class="pagination ng-cloak">
    <li ng-repeat="page in pages"
        ng-class="{'ng-hide': page.type == 'prev' || page.type == 'next'}">
      <a id="feedsPage{{$index}}" ng-class="{'is-active': page.number == localTableParams.page()}" ng-click="localTableParams.page(page.number)" href="">{{page.number}}</a>
    </li>
  </ul>
</script>

</section><!-- /.data-group -->

<script type="text/ng-template" id="earlyVotePagination">
  <ul class="pagination ng-cloak">
    <li ng-repeat="page in pages"
        ng-class="{'ng-hide': page.type == 'prev' || page.type == 'next'}">
      <a id="feedsPage{{$index}}" ng-class="{'is-active': page.number == earlyVoteTableParams.page()}" ng-click="earlyVoteTableParams.page(page.number)" href="">{{page.number}}</a>
    </li>
  </ul>
</script>
