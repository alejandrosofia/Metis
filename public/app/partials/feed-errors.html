<i id="{{pageId}}"></i>

<!-- error table directive -->
<div ng-show="errors.length" ng-error-table errors="errors" errors-table-params="errorsTableParams" toggle-error="toggleError" loading="errors"></div>

<section class="data-group">

  <span ng-if="!errors" class="is-loading"></span>
  <table ng-show="errors.length" id="errorsTable" ng-table="errorsTableParams" template-pagination="errorsPagination" class="table-errors">
    <tr id="error{{$index}}" ng-repeat-start="error in $data">
      <td width="10%" class="numeric" id="error-count{{$index}}" data-title="'Count'" sortable="'error_count'">
        <a href="javascript:void(0)" ng-click="toggleError($index)">{{error.textual_references.length}}</a>
      </td>
      <td id="error-type{{$index}}" data-title="'Error Type'" sortable="'severity_text'" class="toggle-td">
        <a href="javascript:void(0)" ng-click="toggleError($index)">
          <h3><b class="error-toggle"><span id="errorArrowClosed{{$index}}"><i class="fi-plus"></i></span><span id="errorArrowOpen{{$index}}" hidden><i class="fi-minus"></i></span></b> <strong><i class="fi-alert"></i> {{error.severity_text}}:</strong> {{error.title}}</h3>
          <p>{{error.details}}</p>
        </a>
      </td>
    </tr>
    <tr id="errorDetail{{$index}}" ng-repeat-end hidden style="background-color: #f2f2f2">
      <td></td>
      <td class="error-item" style="padding: 20px 0px; padding-right: 20px;">
        <div>
          <small>Sample from the Report:</small>
          <div ng-if="error._code[0]" style="background-color: #fbfbfb; border: 1px solid #cecece; padding: 10px"><pre><code>{{error.textual_references[0]}}</code></pre></div>
          <div ng-if="!error._code[0]" style="background-color: #fff; padding: 10px">{{error.textual_references[0]}}</div>
          <br>
          <a class="button" href="{{servicePath}}?error_report&error_code={{error.error_code}}" ng-show="errors.length">Download Error Report</a>
          <br><br>
        </div>
      </td>
    </tr>
  </table>
  <a class="button" href="{{servicePath}}?error_report" ng-show="errors.length">Download Full Error Report</a>

  <script type="text/ng-template" id="errorsPagination">
    <ul class="pagination ng-cloak">
      <li ng-repeat="page in pages" ng-class="{'ng-hide': page.type == 'prev' || page.type == 'next'}">
        <a id="feedsPage{{$index}}" ng-class="{'is-active': page.number == errorsTableParams.page()}" ng-click="errorsTableParams.page(page.number)" href="">{{page.number}}</a>
    </ul>
  </script>

</section>